import{A as j,s as z,n as V,o as Y,d as Z}from"./scheduler.C_GhXtWQ.js";import{S as F,i as J,e as _,s as I,c as g,d as v,g as d,h as y,q as f,j as $,C as M,b as P,f as Q,k as p,l as W,m as ee,A as K,n as te,o as ne,z as le,t as se,a as ae,p as ie}from"./index.DfwQf5kc.js";import{g as X,U as S,N as re}from"./app.state.CFugrJK5.js";function D(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function oe(i){const e=Object.prototype.toString.call(i);return i instanceof Date||typeof i=="object"&&e==="[object Date]"?new i.constructor(+i):typeof i=="number"||e==="[object Number]"||typeof i=="string"||e==="[object String]"?new Date(i):new Date(NaN)}function ce(i){return oe(i).getDay()===0}const ue=()=>{const{stores:{authenticated:i,currentUser:e},actions:{init:t}}=X();t();const a=j(i),h=j(e);let r=[];const o={label:"Login",url:"/auth/login",roles:[S.UnAuthenticated],index:100},s={label:"Logout",url:"/auth/logout",roles:[S.Authenticated,S.Admin],index:100},n=a?[s]:[o];r=[...r,...re,...n];const c=(l,u)=>{if(!l)return!0;const b=l.find(k=>k.role===u);return b!=null&&b.sundayOnly?ce(new Date):!0};return r.filter(l=>{const u=h.role,b=!!l.roles.find(x=>x===u),k=c(l.visibilities,u);return b&&k}).sort((l,u)=>l.index-u.index)};function G(i,e,t){const a=i.slice();return a[1]=e[t],a}function q(i,e,t){const a=i.slice();return a[1]=e[t],a}function B(i){let e,t,a=i[1].label+"",h,r,o;return{c(){e=_("li"),t=_("a"),h=P(a),o=I(),this.h()},l(s){e=g(s,"LI",{class:!0});var n=v(e);t=g(n,"A",{class:!0,href:!0});var c=v(t);h=Q(c,a),c.forEach(d),o=y(n),n.forEach(d),this.h()},h(){f(t,"class","nav-link"),f(t,"href",r=i[1].url),f(e,"class","nav-item")},m(s,n){$(s,e,n),p(e,t),p(t,h),p(e,o)},p(s,n){n&1&&a!==(a=s[1].label+"")&&W(h,a),n&1&&r!==(r=s[1].url)&&f(t,"href",r)},d(s){s&&d(e)}}}function R(i){let e,t=i[1].label+"",a,h,r;return{c(){e=_("a"),a=P(t),h=I(),this.h()},l(o){e=g(o,"A",{href:!0,class:!0});var s=v(e);a=Q(s,t),h=y(s),s.forEach(d),this.h()},h(){f(e,"href",r=i[1].url),f(e,"class","list-group-item list-group-item-action")},m(o,s){$(o,e,s),p(e,a),p(e,h)},p(o,s){s&1&&t!==(t=o[1].label+"")&&W(a,t),s&1&&r!==(r=o[1].url)&&f(e,"href",r)},d(o){o&&d(e)}}}function fe(i){let e,t,a,h=D(i[0]),r=[];for(let n=0;n<h.length;n+=1)r[n]=B(q(i,h,n));let o=D(i[0]),s=[];for(let n=0;n<o.length;n+=1)s[n]=R(G(i,o,n));return{c(){e=_("ul");for(let n=0;n<r.length;n+=1)r[n].c();t=I(),a=_("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=g(n,"UL",{class:!0});var c=v(e);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(d),t=y(n),a=g(n,"DIV",{class:!0});var l=v(a);for(let u=0;u<s.length;u+=1)s[u].l(l);l.forEach(d),this.h()},h(){f(e,"class","nav w-100 mt-3 d-none d-lg-block d-xl-block d-print-none text-end"),f(a,"class","list-group d-block d-xl-none d-lg-none d-print-none")},m(n,c){$(n,e,c);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);$(n,t,c),$(n,a,c);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(a,null)},p(n,[c]){if(c&1){h=D(n[0]);let l;for(l=0;l<h.length;l+=1){const u=q(n,h,l);r[l]?r[l].p(u,c):(r[l]=B(u),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=h.length}if(c&1){o=D(n[0]);let l;for(l=0;l<o.length;l+=1){const u=G(n,o,l);s[l]?s[l].p(u,c):(s[l]=R(u),s[l].c(),s[l].m(a,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=o.length}},i:V,o:V,d(n){n&&(d(e),d(t),d(a)),M(r,n),M(s,n)}}}function he(i,e,t){let a=[];return Y(()=>{t(0,a=ue())}),[a]}class de extends F{constructor(e){super(),J(this,e,he,fe,z,{})}}function me(i){let e;return{c(){e=_("i"),this.h()},l(t){e=g(t,"I",{class:!0}),v(e).forEach(d),this.h()},h(){f(e,"class","bi bi-moon")},m(t,a){$(t,e,a)},d(t){t&&d(e)}}}function be(i){let e;return{c(){e=_("i"),this.h()},l(t){e=g(t,"I",{class:!0}),v(e).forEach(d),this.h()},h(){f(e,"class","bi bi-sun")},m(t,a){$(t,e,a)},d(t){t&&d(e)}}}function _e(i){let e,t,a,h='<img src="/assets/logo.png" alt="logo" class="logo svelte-193wsx5"/> <div class="navbar-brand mb-0 h1">Eternal Insights</div>',r,o,s,n,c,l='<i class="bi bi-list"></i>',u,b,k,x,U,O;function w(m,L){return m[0]?be:me}let A=w(i),N=A(i);return k=new de({}),{c(){e=_("nav"),t=_("div"),a=_("a"),a.innerHTML=h,r=I(),o=_("div"),s=_("button"),N.c(),n=I(),c=_("button"),c.innerHTML=l,u=I(),b=_("div"),ee(k.$$.fragment),this.h()},l(m){e=g(m,"NAV",{class:!0});var L=v(e);t=g(L,"DIV",{class:!0});var T=v(t);a=g(T,"A",{href:!0,class:!0,"data-svelte-h":!0}),K(a)!=="svelte-1e80ev5"&&(a.innerHTML=h),r=y(T),o=g(T,"DIV",{});var E=v(o);s=g(E,"BUTTON",{class:!0,type:!0});var C=v(s);N.l(C),C.forEach(d),n=y(E),c=g(E,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0,"data-svelte-h":!0}),K(c)!=="svelte-1s10gm3"&&(c.innerHTML=l),E.forEach(d),T.forEach(d),L.forEach(d),u=y(m),b=g(m,"DIV",{class:!0,id:!0});var H=v(b);te(k.$$.fragment,H),H.forEach(d),this.h()},h(){f(a,"href","/home"),f(a,"class","d-flex align-items-center gap-2 text-decoration-none"),f(s,"class","btn btn-link"),f(s,"type","button"),f(c,"class","btn btn-link d-lg-none d-xl-none d-md-inline d-sm-inline"),f(c,"type","button"),f(c,"data-bs-toggle","collapse"),f(c,"data-bs-target","#mini-menu"),f(c,"aria-expanded","false"),f(c,"aria-controls","mini-menu"),f(t,"class","container"),f(e,"class","navbar bg-body-tertiary d-print-none"),f(b,"class","container collapse mt-5"),f(b,"id","mini-menu")},m(m,L){$(m,e,L),p(e,t),p(t,a),p(t,r),p(t,o),p(o,s),N.m(s,null),p(o,n),p(o,c),$(m,u,L),$(m,b,L),ne(k,b,null),x=!0,U||(O=le(s,"click",i[2]),U=!0)},p(m,[L]){A!==(A=w(m))&&(N.d(1),N=A(m),N&&(N.c(),N.m(s,null)))},i(m){x||(se(k.$$.fragment,m),x=!0)},o(m){ae(k.$$.fragment,m),x=!1},d(m){m&&(d(e),d(u),d(b)),N.d(),ie(k),U=!1,O()}}}function ge(i,e,t){let a;const{stores:{darkTheme:h},actions:{toggleTheme:r}}=X();return Z(i,h,o=>t(0,a=o)),[a,h,r]}class $e extends F{constructor(e){super(),J(this,e,ge,_e,z,{})}}export{$e as H,de as N,D as e};
